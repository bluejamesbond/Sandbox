/*MainMusic TemplateCreated by Carlos Andres Viloria Mendoza on 26/11/09.Copyright 2009 goTo! Multiemdia. All rights reserved.*/package {		import flash.display.Sprite;	import flash.display.Loader;	import flash.display.Bitmap;	import flash.display.MovieClip;	import flash.events.Event;	import flash.net.URLRequest;	import flash.net.URLLoader;	import flash.net.URLRequestHeader;		import classes.controls.ScrollPane;	import display.Grid;	import gT.utils.XMLUtils;	import gT.display.components.GenericComponent;		import gs.TweenMax;		public class Products extends GenericComponent {				private var __xml:XML;		private var __grid:Grid;		private var __objData:Array;		private var __scrollPane:ScrollPane;		private var __path:String;				public function Products (path:String = "") {			__path = path;			super();		}				override protected function onStage ():void 		{			loadContent();		}			override public function draw ():void 		{			if (__scrollPane) {				__scrollPane.width = __width;				__scrollPane.height = __height;			}		}				//////////////////////////////////////////////////////////		//		// Events Handler		//		//////////////////////////////////////////////////////////				private function parseXML (e:Event):void		{			__xml = XML(e.currentTarget.data);			__objData = getContent();				contentReady();		}					//////////////////////////////////////////////////////////		//		// Private Methods		//		//////////////////////////////////////////////////////////		private function loadContent ():void		{			// Load content file without cache			var loader:URLLoader = new URLLoader();			var request = new URLRequest(__path+"content.xml");			var header:URLRequestHeader = new URLRequestHeader("no-cache");			request.requestHeaders.push(header);			loader.load(request);			loader.addEventListener(Event.COMPLETE, parseXML, false, 0, true);		}				private function contentReady():void		{			__grid = new Grid(__objData);			__scrollPane = new ScrollPane;			__scrollPane.content = __grid;			addChild(__scrollPane);						draw();		}				private function getContent():Array		{			var result:Array = [];			for each (var item in __xml.item) {				var obj = {};				obj.cover = __path + XMLUtils.validateString(item.@cover.toXMLString(), null);				obj.label = XMLUtils.validateString(item.description.@label.toXMLString(), null);				obj.description = XMLUtils.validateString(item.description.text(), null);				obj.link = XMLUtils.validateString(item.@link.toXMLString(), null);				obj.target = XMLUtils.validateString(item.@target.toXMLString(), null);				result.push(obj);			}							return result;		}	}}